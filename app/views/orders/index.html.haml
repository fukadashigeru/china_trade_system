#wrapper.d-flex{style: "overflow-x: scroll;"}
  / Sidebar
  #sidebar-wrapper.bg-light.border-right
    .d-block
      .sidebar-heading.text-muted
        .h5 ChinaTradeSystem
    %ul.list-group
      %li
        = link_to root_path, class: "list-group-item list-group-item-action bg-light" do
          %i.fas.far.fa-list-alt.fa-lg.active.list-fontawsome.mt-1
          .active.list-item 注文一覧
      %li
        = link_to root_path, class: "list-group-item list-group-item-action bg-light" do
          %i.fa.fa-store-alt.fa-lg.active.list-fontawsome.mt-1
          .active.list-item 買付先一覧
    .d-block.mt-2
      .d-inline-block.float-right#arrow-toggle
        .btn.btn-light#sidebarCollapse
          %i.fas.fa-arrow-left.fa-lg
          %i.active.fas.fa-arrow-right.fa-lg
  / Page Content
  #page-content-wrapper
    / Header
    %nav.navbar.navbar-expand-lg.navbar-light.bg-light.border-bottom{style:" position: fixed; z-index: 1;"}
      %div
        .d-inline-block.mr-2
          = link_to "注文インポート", order_csv_imports_path, class: "btn btn-success", remote: true
        .d-inline-block
          = link_to "注文手入力", new_order_manual_input_path, class: "btn btn-light border-secondary", remote: true
      %button.navbar-toggler{"aria-controls" => "navbarSupportedContent", "aria-expanded" => "false", "aria-label" => "Toggle navigation", "data-target" => "#navbarSupportedContent", "data-toggle" => "collapse", :type => "button"}
        %span.navbar-toggler-icon
      #navbarSupportedContent.collapse.navbar-collapse
        %ul.navbar-nav.ml-auto.mt-2.mt-lg-0
          %li.nav-item.dropdown
            %a#navbarDropdown.nav-link.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :href => "#", :role => "button"}
              = current_user.name
            %ul.dropdown-menu.dropdown-menu-right{"aria-labelledby" => "navbarDropdown"}
              %li.dropdown-item
                = link_to "別アカウントにログイン", destroy_user_session_path, method: :delete, class: "dropdown-item"
              %li.dropdown-item
                = link_to "ログアウト", destroy_user_session_path, method: :delete, class: "dropdown-item"
              .dropdown-divider
              %li.dropdown-item
                = link_to "設定", destroy_user_session_path, method: :delete, class: "dropdown-item"
    / Container
    .container-fluid.pt-3{style: "margin-top: 43px;"}
      .table-responsive
        %table.table.table-hover.table-bordered
          %thead.thead-light
            %tr
              %th.align-middle 注文No
              %th.align-middle 商品写真
              %th.align-middle 色・サイズ・数量
              %th.align-middle お届け先
              %th.align-middle 予定費用
              %th.align-middle 実績費用
              %th.align-middle 発注状況
              %th.align-middle 直接編集
          %tbody
            -@orders.each do |order|
              %tr
                %td.align-middle
                  = order.trade_no
                %td.ks-1.align-middle{id: "order-id-#{order.id}_pictures", style: "max-width: 180px;"}
                  - if order.pictures.empty?
                    .ks-2.d-inline-block{id: "order-id-#{order.id}_picture-1"}
                      = link_to "画像リンクを入力してください", new_picture_path(order_id: order.id, button: 1), remote: true, class: "btn btn-light pull-right btn-block add-btn", style: "color: gray;", title: 'クリックして入力', data: { toggle: "tooltip", placement: "right", delay: { "show": 200, "hide": 100 }}
                  - else
                    - order.pictures.order(:id).each_with_index do |picture, i|
                      .ks-2.d-inline-block.p-1.mb-2.bg-light.picture-block.w-100{id: "order-id-#{order.id}_picture-#{i + 1}", style: "min-height: 70px;"}
                        %img.ks-3{:src => picture.url, :class => "w-100"}/
                        .ks-3.d-block.text-right
                          = link_to picture_path(picture.id, order_id: order.id), class: "btn delete-btn btn-danger", remote: true, method: :delete,data: { confirm: '本当に削除しますか？' } do
                            %i.far.fa-trash-alt
                        .d-block.text-right
                          = link_to "編集", edit_picture_path(picture.id, order_id: order.id, button: i + 1), remote: true, class: "btn btn-primary edit-btn mt-1"
                    .ks-2.d-block.bg-light.text-center.picture-addition-block{id: "order-id-#{order.id}_picture-#{order.pictures.length + 1}"}
                      = link_to "追加", new_picture_path(order_id: order.id, button: order.pictures.length + 1), remote: true, class: "btn btn-sm btn-success add-btn m-1 ks-3"
                %td{style: "max-width: 180px;"}
                  .d-inline-block
                    色・サイズ：
                  .d-inline-block
                    = order.color_size
                  %hr/
                  %div
                    .d-inline-block
                      颜色・尺寸:
                    .d-inline-block.pull-left{id: "taobao_color_size-order_id-#{order.id}"}
                      - if order.taobao_color_size.present?
                        - if order.taobao_color_size.name.present?
                          = link_to "#{order.taobao_color_size.name}", edit_taobao_color_size_path(order.taobao_color_size.id), remote: true, class: "btn btn-light text-left edit-btn", style: "word-break: break-all;"
                        - else
                          = link_to "色・サイズを中国語で入力", edit_taobao_color_size_path(order.taobao_color_size.id), remote: true, class: "btn btn-light text-left edit-btn btn-block", style: "color: gray;", title: 'クリックして入力', data: { toggle: "tooltip", placement: "right", delay: { "show": 200, "hide": 100 }}
                      - else
                        = link_to "色・サイズを中国語で入力", new_taobao_color_size_path(order_id: order.id), remote: true, class: "btn btn-light text-left edit-btn btn-block", style: "color: gray;", title: 'クリックして入力', data: { toggle: "tooltip", placement: "right", delay: { "show": 200, "hide": 100 }}
                  %hr/
                  数量: 
                  = order.quantity
                %td{style: "max-width: 150px;"}
                  = order.postal
                  %br
                  = order.address
                  %br
                  = order.customer_name
                  %br
                  = order.phone
                %td.align-middle
                  = ""
                %td.align-middle
                  = ""
                %td.align-middle
                  = ""
                %td.align-middle.text-center
                  -# = link_to edit_order_path(id: order.id), class: "btn btn-blue btn-ml", remote: true do
                  = link_to edit_order_path(order.id), class: "btn btn-blue btn-ml edit-btn", remote: true do
                    %i.far.fa-edit

:javascript
  $(document).on('change', ':file', function() {
    var input = $(this),
    numFiles = input.get(0).files ? input.get(0).files.length : 1,
    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
    input.parent().parent().next(':text').val(label);
  });
  function file_selected(file_field){
    var filename = $(file_field)[0].files[0].name;
    $("#filename").val(filename);
  }
  $(document).ready(function () {
    $('#sidebarCollapse').on('click', function () {
      $('#sidebar-wrapper').toggleClass('active');
      $('#page-content-wrapper').toggleClass('active');
      var toggle_status = $.cookie('toggle');
      if (toggle_status == 'active') {
        $.cookie('toggle','');
      } else if( toggle_status == '' ) {
        $.cookie('toggle','active');
      }
    });
  });
  $(function(){
    $("#operations").change(function(){
      $("#operations").submit();
    });
  });
  $("#chinese_buyer_id").select2({width:'auto'});
  $("#menu-toggle").click(function(e) {
    e.preventDefault();
    $("#wrapper").toggleClass("toggled");
  });
  $(function(){
    var toggle_status = $.cookie('toggle');
    if (toggle_status === 'active') {
      $('#sidebar-wrapper').css('transition','all 0.0s');
      $('#page-content-wrapper').css('transition','all 0.0s');
      $('#sidebar-wrapper').toggleClass('active');
      $('#page-content-wrapper').toggleClass('active');
      setTimeout(function(){
        $('#sidebar-wrapper').css('transition','all 0.6s');
        $('#page-content-wrapper').css('transition','all 0.6s');
      }, 0);
    } else {
      $('#sidebar-wrapper').css('transition','all 0.6s');
      $('#page-content-wrapper').css('transition','all 0.6s'); 
    }
  });
